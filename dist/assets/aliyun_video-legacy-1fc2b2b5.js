System.register(["./index-legacy-137abe7a.js","./useUtil-legacy-c53d5ca8.js","./icon-legacy-77913071.js","./hls-legacy-49727c70.js","./Layout-legacy-538e21c7.js","./api-legacy-60e9815c.js","./index-legacy-acfce738.js","./index-legacy-3947c086.js","./index-legacy-aff400bf.js","./FolderTree-legacy-b3ed59d4.js"],(function(e,t){"use strict";var a,n,o,l,r,i,s,c,u,d,p,y,g,m,f,h,b,v,j,w,k,x,_;return{setters:[e=>{a=e.u,n=e.o,o=e.au,l=e.cn,r=e.bD,i=e.a,s=e.b4,c=e._,u=e.k,d=e.bb,p=e.n,y=e.av,g=e.j,m=e.a3,f=e.a5,h=e.aP,b=e.a6},e=>{v=e.a},e=>{j=e.O},e=>{w=e.H,k=e.a,x=e.A},e=>{_=e.c},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){e("default",(()=>{const{replace:e}=a(),{proxyLink:t}=v();let F,W=n.objs.filter((e=>e.type===j.VIDEO));0===W.length&&(W=[n.obj]);let L={id:"player",container:"#video-player",title:n.obj.name,volume:.5,autoplay:o("video_autoplay"),autoSize:!1,autoMini:!0,loop:!1,flip:!0,playbackRate:!0,aspectRatio:!0,setting:!0,hotkey:!0,pip:!0,mutex:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!0,miniProgressBar:!1,playsInline:!0,quality:[],plugins:[],whitelist:[],moreVideoAttr:{"webkit-playsinline":!0,playsInline:!0},type:"m3u8",customType:{m3u8:function(e,t){const a=new w;a.loadSource(t),a.attachMedia(e),e.src||(e.src=t)}},lang:["en","zh-cn","zh-tw"].includes(l().toLowerCase())?l().toLowerCase():"en",lock:!0,fastForward:!0,autoPlayback:!0,autoOrientation:!0,airplay:!0};_&&(L.moreVideoAttr.controls=!0);const O=n.related.find((e=>{for(const t of[".srt",".ass",".vtt"])if(e.name.endsWith(t))return!0;return!1})),z=n.related.find((e=>{for(const t of[".xml"])if(e.name.endsWith(t))return!0;return!1}));O&&(L.subtitle={url:t(O,!0),type:r(O.name)}),z&&(L.plugins=[k({danmuku:t(z,!0),speed:5,opacity:1,fontSize:25,color:"#FFFFFF",mode:0,margin:[0,"0%"],antiOverlap:!1,useWorker:!0,synchronousPlayback:!1,lockTime:5,maxLength:100,minWidth:200,maxWidth:400,theme:"dark"})]);const{pathname:I}=a(),[P,S]=i((()=>s.post("/fs/other",{path:I(),password:c(),method:"video_preview"})));return u((async()=>{const t=await S();d(t,(t=>{const a=t.video_preview_play_info.live_transcoding_task_list.filter((e=>e.url));0!==a.length?(L.url=a[a.length-1].url,L.quality=a.map(((e,t)=>({html:e.template_id,url:e.url,default:t===a.length-1}))),F=new x(L),F.on("video:ended",(()=>{const t=W.findIndex((e=>e.name===n.obj.name));t<W.length-1&&e(W[t+1].name)}))):p.error("No transcoding video found")}))})),y((()=>{F?.destroy()})),g(b,{get loading(){return P()},get children(){return g(m,{w:"$full",spacing:"$2",get children(){return[g(f,{w:"$full",h:"60vh",id:"video-player"}),g(h,{onChange:t=>{e(t)},get value(){return n.obj.name},get options(){return W.map((e=>({value:e.name})))}})]}})}})}))}}}));
