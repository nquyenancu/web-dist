System.register(["./index-legacy-137abe7a.js","./index-legacy-acfce738.js","./DeletePopover-legacy-42cebf6e.js"],(function(e,r){"use strict";var t,a,n,s,o,l,c,g,i,d,u,h,m,b,$,f,p,k,w,_,v,y;return{setters:[e=>{t=e.d,a=e.u,n=e.a,s=e.b4,o=e.j,l=e.W,c=e.ad,g=e.a8,i=e.ba,d=e.bv,u=e.C,h=e.a5,m=e.B,b=e.aN,$=e.bb,f=e.n,p=e.a3,k=e.r,w=e.bZ,_=e.E},e=>{v=e.n},e=>{y=e.D}],execute:function(){const r=e=>{const r=t(),{to:k}=a(),[w,_]=n((()=>s.post(`/admin/storage/delete?id=${e.storage.id}`))),[v,C]=n((()=>s.post(`/admin/storage/${e.storage.disabled?"enable":"disable"}?id=${e.storage.id}`)));return o(p,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return l("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${c()}`}},get children(){return[o(g,{spacing:"$2",get children(){return[o(i,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return e.storage.mount_path}}),o(d,{colorScheme:"info",get children(){return r(`drivers.drivers.${e.storage.driver}`)}})]}}),o(g,{get children(){return[o(i,{get children(){return[u((()=>r("storages.common.status"))),":Â "]}}),o(h,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return e.storage.status}})]}}),o(i,{css:{wordBreak:"break-all"},get children(){return e.storage.remark}}),o(g,{spacing:"$2",get children(){return[o(m,{onClick:()=>{k(`/@manage/storages/edit/${e.storage.id}`)},get children(){return r("global.edit")}}),o(m,{get loading(){return v()},colorScheme:"warning",onClick:async()=>{const r=await C();b(r,(()=>{e.refresh()}))},get children(){return r("global."+(e.storage.disabled?"enable":"disable"))}}),o(y,{get name(){return e.storage.mount_path},get loading(){return w()},onClick:async()=>{const t=await _();$(t,(()=>{f.success(r("global.delete_success")),e.refresh()}))}})]}})]}})};e("default",(()=>{const e=t();v("manage.sidemenu.storages");const{to:l}=a(),[c,i]=n((()=>s.get("/admin/storage/list"))),[d,u]=k([]),h=async()=>{const e=await i();$(e,(e=>u(e.content)))};h();const b=async()=>{const r=await s.post("/admin/storage/load_all");$(r,(()=>{f.success(e("storages.common.start_load_success"))}))};return o(p,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[o(g,{spacing:"$2",get children(){return[o(m,{colorScheme:"accent",get loading(){return c()},onClick:h,get children(){return e("global.refresh")}}),o(m,{onClick:()=>{l("/@manage/storages/add")},get children(){return e("global.add")}}),o(m,{colorScheme:"warning",get loading(){return c()},onClick:b,get children(){return e("storages.common.load_all")}})]}}),o(w,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return o(_,{get each(){return d()},children:e=>o(r,{storage:e,refresh:h})})}})]}})}))}}}));
